(this["webpackJsonpninas-bloglist"]=this["webpackJsonpninas-bloglist"]||[]).push([[0],{103:function(e,t,a){e.exports=a(132)},132:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=a(24),i=a(193),u=a(194),s=a(51),m=a(87),d=a(43),f=a(8),g=a.n(f),b=a(29),p=a.n(b),E=null,v=function(){return{headers:{Authorization:E}}},h=function(){return p.a.get("/api/blogs").then((function(e){return e.data}))},y=function(e){var t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(p.a.post("/api/blogs",e,v()));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},O=function(e){var t,a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(d.a)({},e,{likes:e.likes+1}),n.next=3,g.a.awrap(p.a.put("".concat("/api/blogs","/").concat(e.id),t,v()));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},w=function(e){E="bearer ".concat(e)},C=function(){E=null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;default:return e}},x=function(e,t){var a={message:e,variant:t};return function(e){e({type:"SHOW",data:a}),setTimeout((function(){e({type:"HIDE"})}),5e3)}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW":return t.data;case"HIDE":return null;default:return e}},k=function(){return p.a.get("/api/users").then((function(e){return e.data}))},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},I=function(e,t){var a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(p.a.post("".concat("/api/blogs","/").concat(t,"/comments"),e));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"CREATE_BLOG":return e.concat(t.data);case"DELETE_BLOG":return e.filter((function(e){return e.id!==t.data}));case"UPDATE_LIKES":var a=e.find((function(e){return e.id===t.data.id})),n=Object(d.a)({},a,{likes:a.likes+1});return e.map((function(e){return e.id!==n.id?e:n}));case"CREATE_COMMENT":var r=e.find((function(e){return e.id===t.data.blog})),c=Object(d.a)({},r,{comments:r.comments.concat(t.data)});return e.map((function(e){return e.id!==c.id?e:c}));default:return e}},T=Object(s.c)({user:j,users:B,blogs:S,notification:N}),U=Object(s.d)(T,Object(s.a)(m.a)),L=a(20),W=a(32),A=function(e){var t=Object(n.useState)(""),a=Object(L.a)(t,2),r=a[0],c=a[1];return[{type:e,value:r,onChange:function(e){c(e.target.value)}},function(){c("")}]},z=function(e){var t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(p.a.post("/api/login",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},D=a(201),_=a(3),G=a(88),M=a(163),q=a(66),R=a(65),H=Object(G.a)((function(e){return{success:{backgroundColor:q.a[100],color:e.palette.common.black},error:{backgroundColor:R.a[600],fontWeight:500}}})),J=function(e){var t=e.message,a=e.variant,n=H();return r.a.createElement(M.a,{className:Object(_.a)(n[a]),message:t})},P=Object(l.b)((function(e){return{notification:e.notification}}))((function(e){var t=e.notification;return null===t?null:r.a.createElement(D.a,{open:!0,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(J,{message:t.message,variant:t.variant}))})),F=a(165),K=a(202),Q=a(58),V=a(196),X=a(169),Y=a(166),Z=Object(G.a)((function(e){return{root:{marginTop:e.spacing(9),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{marginTop:e.spacing(2)}}})),$=function(e){var t=e.username,a=e.password,n=e.handleSubmit,c=Z();return r.a.createElement(F.a,{maxWidth:"xs"},r.a.createElement("div",{className:c.root},r.a.createElement(K.a,{className:c.avatar},r.a.createElement(Y.a,null)),r.a.createElement(Q.a,{component:"h2",variant:"h5"},"Sign In to Bloglist"),r.a.createElement("form",{onSubmit:n,className:c.form,id:"login-form"},r.a.createElement(V.a,Object.assign({},t,{name:"Username",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,label:"Username"})),r.a.createElement(V.a,Object.assign({},a,{name:"Password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password"})),r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",size:"large",className:c.submit,fullWidth:!0,"data-cy":"submit"},"Sign In"))))},ee=a(44),te=a(72),ae=a(197),ne=a(192),re=a(170),ce=a(171),oe=a(198),le=Object(G.a)((function(e){return{root:{backgroundColor:e.palette.primary.dark},grow:{flexGrow:1},button:{marginLeft:e.spacing(2)}}})),ie={logoutUser:function(){return function(e){window.localStorage.removeItem("loggedBloglistUser"),C(),e({type:"LOGOUT"})}},setNotification:x},ue=Object(ee.g)(Object(l.b)((function(e){return{user:e.user}}),ie)((function(e){var t=le(),a=e.user;return r.a.createElement(re.a,{position:"sticky",className:t.root},r.a.createElement(ce.a,null,r.a.createElement(Q.a,{variant:"h5",component:"h1",color:"inherit"},"Blogs App"),r.a.createElement("div",{className:t.grow}),r.a.createElement("div",null,r.a.createElement(oe.a,{xsDown:!0},"Logged in as ",a.name),r.a.createElement(X.a,{onClick:function(){e.logoutUser(),e.setNotification("".concat(a.name," logged out"),"success")},className:t.button,variant:"outlined",size:"small"},"Logout"))))}))),se=a(195),me=a(172),de=function(e){var t=e.buttonLabel,a=e.children,c=Object(n.useState)(!1),o=Object(L.a)(c,2),l=o[0],i=o[1],u={display:l?"none":""},s={display:l?"":"none"},m=function(){i(!l)};return r.a.createElement(se.a,{mb:2},r.a.createElement("div",{style:u},r.a.createElement(X.a,{onClick:m,variant:"outlined",color:"primary",size:"large",fullWidth:!0},t)),r.a.createElement("div",{style:s},a,r.a.createElement(Q.a,{component:"div",align:"right"},r.a.createElement(X.a,{onClick:m,endIcon:r.a.createElement(me.a,null),"data-cy":"cancel"},"Cancel"))))},fe=a(173),ge=a(174),be=a(175),pe=function(e){var t=e.handleBlogCreation,a=A("text"),n=Object(L.a)(a,2),c=n[0],o=n[1],l=A("text"),i=Object(L.a)(l,2),u=i[0],s=i[1],m=A("text"),d=Object(L.a)(m,2),f=d[0],g=d[1];return r.a.createElement(fe.a,null,r.a.createElement(ge.a,null,r.a.createElement(Q.a,{variant:"h5",align:"center",gutterBottom:!0},"Create New"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:c.value,author:u.value,url:f.value}),o(),s(),g()},id:"new-blog-form"},r.a.createElement(se.a,{mt:2,mx:2,mb:3},r.a.createElement(V.a,Object.assign({},c,{name:"Title",label:"Title",fullWidth:!0,required:!0,"data-cy":"title"})),r.a.createElement(V.a,Object.assign({},u,{name:"Author",label:"Author",fullWidth:!0,required:!0,"data-cy":"author"})),r.a.createElement(V.a,Object.assign({},f,{name:"Url",label:"Url",type:"url",fullWidth:!0,required:!0,"data-cy":"url"}))),r.a.createElement(Q.a,{component:"div",align:"center"},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",startIcon:r.a.createElement(be.a,null),"data-cy":"create"},"Create")))))},Ee=a(176),ve=a(177),he=a(179),ye=a(168),Oe=a(178),we=Object(G.a)((function(e){return{allItems:{"&:hover .MuiAvatar-colorDefault":{backgroundColor:e.palette.primary.main}},selectItems:{"&:hover .MuiAvatar-colorDefault":{backgroundColor:e.palette.secondary.main}},avatar:{backgroundColor:e.palette.grey[300]}}})),Ce=function(e){var t=e.blogs,a=e.variant,n=we();return r.a.createElement(ye.a,null,(t.sort((function(e,t){return t.likes-e.likes})),t.map((function(e){return r.a.createElement(Ee.a,{button:!0,key:e.id,to:"/blogs/".concat(e.id),component:W.b,className:Object(_.a)(n[a])},r.a.createElement(ve.a,null,r.a.createElement(K.a,{className:n.avatar},r.a.createElement(Oe.a,null))),r.a.createElement(he.a,{primary:e.title}))}))))},je=function(e){var t=e.blogs,a=e.handleBlogCreation;return r.a.createElement(F.a,{maxWidth:"sm"},r.a.createElement(se.a,{mt:4,mb:3},r.a.createElement(Q.a,{variant:"h3",align:"center",color:"primary",gutterBottom:!0},"Blogs")),r.a.createElement(de,{buttonLabel:"Add New Blog"},r.a.createElement(pe,{handleBlogCreation:a})),r.a.createElement(Ce,{blogs:t,variant:"allItems"}))},xe=a(5),Ne=a(180),ke=a(181),Be=a(182),Ie=a(183),Se=a(184),Te=a(185),Ue=Object(xe.a)((function(){return{head:{fontSize:18,fontWeight:400},body:{fontSize:18}}}))(Ne.a),Le=function(e){var t=e.users;return r.a.createElement(F.a,{maxWidth:"sm"},r.a.createElement(se.a,{mt:4,mb:3},r.a.createElement(Q.a,{variant:"h3",align:"center",color:"secondary",gutterBottom:!0},"Users")),r.a.createElement(Ie.a,{"aria-label":"user table"},r.a.createElement(Se.a,{color:"primary"},r.a.createElement(ke.a,null,r.a.createElement(Ue,null,"Name"),r.a.createElement(Ue,null,"Blogs"))),r.a.createElement(Te.a,null,t.map((function(e){return r.a.createElement(ke.a,{key:e.id},r.a.createElement(Ue,null,r.a.createElement(Be.a,{to:"/users/".concat(e.id),component:W.b,color:"secondary"},e.name)),r.a.createElement(Ue,null,e.blogs.length))})))))},We=a(188),Ae=a(189),ze=a(190),De=a(191),_e=a(167),Ge=a(205),Me=a(204),qe=function(e){var t=e.handleCommentCreation,a=A("text"),n=Object(L.a)(a,2),c=n[0],o=n[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({content:c.value}),o()},id:"new-comment-form"},r.a.createElement(_e.a,{fullWidth:!0,variant:"outlined"},r.a.createElement(Ge.a,{htmlFor:"comment"},"Write your comment here..."),r.a.createElement(Me.a,Object.assign({},c,{name:"Comment",id:"comment",labelWidth:200,multiline:!0}))),r.a.createElement(se.a,{textAlign:"center",mt:2},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",size:"large"},"Add Comment")))},Re=a(186),He=a(187),Je=Object(G.a)((function(e){return{avatar:{color:e.palette.grey[400]}}})),Pe=function(e){var t=e.comments,a=Je();return r.a.createElement(ye.a,null,t.map((function(e){return r.a.createElement(Ee.a,{key:e._id},r.a.createElement(Re.a,null,r.a.createElement(He.a,{className:a.avatar})),r.a.createElement(he.a,{primary:e.content}))})))},Fe=function(e){var t=e.comments,a=e.handleCommentCreation;return r.a.createElement(se.a,null,r.a.createElement(Q.a,{variant:"h5",align:"center",gutterBottom:!0},"Comments"),r.a.createElement(qe,{handleCommentCreation:a}),r.a.createElement(Pe,{comments:t}))},Ke=function(){return r.a.createElement(se.a,{mt:6},r.a.createElement(Q.a,{variant:"h5",align:"center"},"This page does not exist!"))},Qe=Object(G.a)((function(e){return{card:{marginTop:e.spacing(6),marginBottom:e.spacing(4)},actions:{justifyContent:"space-between",padding:e.spacing(1,2),backgroundColor:e.palette.grey[200]},button:{marginLeft:e.spacing(2),backgroundColor:"#eb928a",color:e.palette.common.white,"&:hover":{backgroundColor:"#e64a19"}}}})),Ve={updateLikes:function(e){return function(t){var a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(O(e));case 2:a=n.sent,t({type:"UPDATE_LIKES",data:a});case 4:case"end":return n.stop()}}))}},createComment:function(e,t){return function(a){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(I(e,t));case 2:n=r.sent,a({type:"CREATE_COMMENT",data:n});case 4:case"end":return r.stop()}}))}},setNotification:x},Xe=Object(l.b)(null,Ve)((function(e){var t=Qe(),a=e.blog;return void 0===a?r.a.createElement(Ke,null):r.a.createElement(F.a,{maxWidth:"sm"},r.a.createElement(fe.a,{className:t.card},r.a.createElement(We.a,{href:a.url},r.a.createElement(ge.a,null,r.a.createElement(Q.a,{variant:"h5",component:"h3",align:"center",gutterBottom:!0},a.title),r.a.createElement(Q.a,{variant:"subtitle1",component:"h4",color:"textSecondary",align:"center"},"by ",a.author))),r.a.createElement(Ae.a,{className:t.actions},r.a.createElement(Q.a,{variant:"body1"},"Added by ",r.a.createElement("strong",null,a.user.name)),r.a.createElement(Q.a,{componenet:"div"},a.likes," Likes",r.a.createElement(ze.a,{onClick:function(){return e.updateLikes(Object(d.a)({},a,{user:a.user.id})),void e.setNotification("New like added for '".concat(a.title,"'"),"success")},size:"medium","aria-label":"add like",className:t.button},r.a.createElement(De.a,null))))),r.a.createElement(Fe,{comments:a.comments,handleCommentCreation:function(t){t.content.length<2?e.setNotification("Comment too short","error"):(e.createComment(t,a.id),e.setNotification("New comment added for '".concat(a.title,"'"),"success"))}}))})),Ye=function(e){var t=e.user;return void 0===t?r.a.createElement(Ke,null):r.a.createElement(F.a,{maxWidth:"sm"},r.a.createElement(se.a,{mt:4},r.a.createElement(Q.a,{variant:"h4",align:"center",color:"secondary",gutterBottom:!0},t.name)),r.a.createElement(Q.a,{variant:"h5",align:"center",gutterBottom:!0},"Added Blogs"),0===t.blogs.length?r.a.createElement(Q.a,{variant:"body1",align:"center"},"No blogs as yet."):r.a.createElement(Ce,{blogs:t.blogs,variant:"selectItems"}))},Ze={createBlog:function(e,t){return function(a){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(y(e));case 2:n=r.sent,a({type:"CREATE_BLOG",data:Object(d.a)({},n,{user:t})});case 4:case"end":return r.stop()}}))}},setNotification:x},$e=Object(ee.g)(Object(l.b)(null,Ze)((function(e){var t=e.user,a=e.users,n=e.blogs,c=e.history,o=function(a){var r=n.find((function(e){return e.url===a.url}));if(a.title.length<4||a.author.length<2)e.setNotification("Title or author name too short","error");else if(r)e.setNotification("This blog already exists","error");else{var c={name:t.name,username:t.username};e.createBlog(a,c),e.setNotification("New Blog '".concat(a.title,"' by ").concat(a.author," added"),"success")}},l=function(e){c.push(e)};return r.a.createElement("div",null,r.a.createElement(ue,{history:c}),r.a.createElement(ee.b,{path:"/",render:function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement(te.a,{square:!0},r.a.createElement(ae.a,{value:("/"===t.pathname||"/users"===t.pathname)&&t.pathname,onChange:l,indicatorColor:"/"===t.pathname?"primary":"secondary",centered:!0},r.a.createElement(ne.a,{label:"Blogs",component:W.b,to:"/",value:"/"}),r.a.createElement(ne.a,{label:"Users",component:W.b,to:"/users",value:"/users"}))),r.a.createElement(ee.d,null,r.a.createElement(ee.b,{path:"/blogs/:id",render:function(e){var t,a=e.match;return r.a.createElement(Xe,{blog:(t=a.params.id,n.find((function(e){return e.id===t})))})}}),r.a.createElement(ee.b,{path:"/users/:id",render:function(e){var t,n=e.match;return r.a.createElement(Ye,{user:(t=n.params.id,a.find((function(e){return e.id===t})))})}}),r.a.createElement(ee.b,{path:"/users",render:function(){return r.a.createElement(Le,{users:a})}}),r.a.createElement(ee.a,{exact:!0,from:"/blogs",to:"/"}),r.a.createElement(ee.b,{exact:!0,path:"/",render:function(){return r.a.createElement(je,{blogs:n,handleBlogCreation:o})}}),r.a.createElement(ee.b,null,r.a.createElement(Ke,null))))}}))}))),et={initializeBlogs:function(){return function(e){var t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(h());case 2:t=a.sent,e({type:"INIT_BLOGS",data:t});case 4:case"end":return a.stop()}}))}},initializeUsers:function(){return function(e){var t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(k());case 2:t=a.sent,e({type:"INIT_USERS",data:t});case 4:case"end":return a.stop()}}))}},initializeUser:function(e){return function(t){w(e.token),t({type:"LOGIN",data:e})}},setNotification:x,loginUser:function(e){return function(t){window.localStorage.setItem("loggedBloglistUser",JSON.stringify(e)),w(e.token),t({type:"LOGIN",data:e})}}},tt=Object(l.b)((function(e){return{user:e.user,users:e.users,blogs:e.blogs}}),et)((function(e){var t=A("text"),a=Object(L.a)(t,1)[0],c=A("password"),o=Object(L.a)(c,1)[0],l=e.user,i=e.users,u=e.blogs;Object(n.useEffect)((function(){e.initializeBlogs()}),[]),Object(n.useEffect)((function(){e.initializeUsers()}),[u]),Object(n.useEffect)((function(){var t=window.localStorage.getItem("loggedBloglistUser");if(t){var a=JSON.parse(t);e.initializeUser(a)}}),[]);return r.a.createElement(W.a,null,r.a.createElement("div",null,r.a.createElement(P,null),null===l?r.a.createElement($,{username:a,password:o,handleSubmit:function(t){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),r.prev=1,r.next=4,g.a.awrap(z({username:a.value,password:o.value}));case 4:n=r.sent,e.loginUser(n),e.setNotification("Hi ".concat(n.name,", welcome back!"),"success"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),e.setNotification("Check username and password","error");case 12:case"end":return r.stop()}}),null,null,[[1,9]])}}):r.a.createElement($e,{user:l,users:i,blogs:u})))})),at=a(93),nt=a(200),rt=Object(at.a)({palette:{primary:{light:"#7de1ee",main:"#46afbc",dark:"#007f8c",contrastText:"#fff"},secondary:{light:"#c68400",main:"#ffb300",dark:"#c68400",contrastText:"#fff"}},overrides:{MuiTab:{root:{minWidth:120}},MuiSnackbarContent:{root:{justifyContent:"center"}}}}),ct=rt=Object(nt.a)(rt);o.a.render(r.a.createElement(l.a,{store:U},r.a.createElement(i.a,{theme:ct},r.a.createElement(u.a,null),r.a.createElement(tt,null))),document.getElementById("root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.8ed3f555.chunk.js.map